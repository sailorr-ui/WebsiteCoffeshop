<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Checkout</title>
</head>
<body>

<h2>Checkout TEST</h2>

<label>Atas Nama</label><br>
<input type="text" id="nama" placeholder="Masukkan nama"><br><br>

<button id="bayar-btn">Bayar Sekarang</button>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCmaCTNGhxjX07I94TA7XXOoLNnbmOF4Ts",
    authDomain: "form-checkout-592c3.firebaseapp.com",
    databaseURL: "https://form-checkout-592c3-default-rtdb.firebaseio.com",
    projectId: "form-checkout-592c3",
    storageBucket: "form-checkout-592c3.firebasestorage.app",
    messagingSenderId: "190795533293",
    appId: "1:190795533293:web:49e162fcbd864902f075e4"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  const btn = document.getElementById("bayar-btn");
  const namaInput = document.getElementById("nama");

  btn.addEventListener("click", async () => {
    const nama = namaInput.value.trim();
    if (!nama) {
      alert("Isi nama dulu");
      return;
    }

    try {
      const result = await push(ref(db, "checkout_test"), {
        nama: nama,
        waktu: new Date().toISOString()
      });

      alert("BERHASIL! Key: " + result.key);
    } catch (err) {
      console.error(err);
      alert("GAGAL: " + err.message);
    }
  });
</script>

</body>
</html>
